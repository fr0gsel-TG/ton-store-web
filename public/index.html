<!DOCTYPE html>
<html>
<head>
    <title>TON Store</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: Arial; text-align: center; padding: 20px; }
        .product { border: 1px solid #ddd; padding: 15px; margin: 10px; }
        button { background: #0088cc; color: white; border: none; padding: 10px; }
    </style>
</head>
<body>
    <h1>üõí TON Store</h1>
    <div id="products">
        <p>–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –≤ –±–æ—Ç–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ç–æ–≤–∞—Ä—ã.</p>
    </div>

    <script>
        Telegram.WebApp.ready();
        
        // –ü–æ–ª—É—á–∞–µ–º –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∏–∑ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: ?q=iphone)
        const query = new URLSearchParams(window.location.search).get('q');
        
        if (query) {
            fetch(`/api/search?q=${query}`)
                .then(res => res.json())
                .then(products => {
                    let html = '';
                    products.forEach(p => {
                        html += `
                        <div class="product">
                            <h3>${p.title}</h3>
                            <p>üí∞ ${p.price} ‚ÇΩ</p>
                            <button onclick="buy('${p.url}')">–ö—É–ø–∏—Ç—å</button>
                        </div>`;
                    });
                    document.getElementById('products').innerHTML = html;
                });
        }

        function buy(url) {
            Telegram.WebApp.sendData(JSON.stringify({ url: url }));
        }
    </script>
</body>
</html>